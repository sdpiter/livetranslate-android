<string name="speech_settings">Speech Settings</string>
    <string name="speech_speed">Speech Speed</string>
    <string name="speech_voice">Speech Voice</string>
    <string name="voice_default">Default (System)</string>
    <string name="speed_slow">Slow</string>
    ```

---

### üì• **2. –§–∞–π–ª: `app/src/main/res/values-ru/strings.xml`**

**–°—Å—ã–ª–∫–∞:** `sdpiter/livetranslate-android/livetranslate-android-250e42ad8dc2c7041b57801f24e4c9ee6b0ef16c/app/src/main/res/values-ru/strings.xml`

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:** –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ—Ö –∂–µ –¥–≤—É—Ö —Å—Ç—Ä–æ–∫ –≤ —Ä—É—Å—Å–∫–∏–π —Ñ–∞–π–ª:

```xml
    <string name="speech_settings">–†–µ—á—å</string>
    <string name="speech_speed">–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏</string>
    <string name="speech_voice">–ì–æ–ª–æ—Å</string>
    <string name="voice_default">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</string>
    <string name="speed_slow">–ú–µ–¥–ª–µ–Ω–Ω–æ</string>
    ```

---

### üì• **3. –§–∞–π–ª: `app/src/main/res/layout/activity_settings.xml`**

**–°—Å—ã–ª–∫–∞:** `sdpiter/livetranslate-android/livetranslate-android-250e42ad8dc2c7041b57801f24e4c9ee6b0ef16c/app/src/main/res/layout/activity_settings.xml`

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:** –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –±–ª–æ–∫ (–Ω–∞—á–∏–Ω–∞—è —Å ``) —Å—Ä–∞–∑—É **–ø–æ—Å–ª–µ** `</LinearLayout>` (–∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–∞–π–¥–µ—Ä —Å–∫–æ—Ä–æ—Å—Ç–∏) –∏ **–ø–µ—Ä–µ–¥** `</LinearLayout>` (–∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É "Speech Settings").

```xml
                </LinearLayout>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/speech_voice"
                    android:textSize="15sp"
                    android:textColor="@color/text_primary"
                    android:layout_marginTop="16dp"
                    android:layout_marginBottom="8dp"/>

                <Spinner
                    android:id="@+id/spinnerSpeechVoice"
                    android:layout_width="match_parent"
                    android:layout_height="56dp"
                    android:paddingStart="4dp"
                    android:paddingEnd="4dp"
                    android:spinnerMode="dropdown"
                    android:popupBackground="@color/white"
                    style="@style/Widget.AppCompat.Spinner"/>
                </LinearLayout>
        </com.google.android.material.card.MaterialCardView>
        ```

---

### üì• **4. –§–∞–π–ª: `app/src/main/java/com/sdpiter/livetranslate/SettingsActivity.kt`**

**–°—Å—ã–ª–∫–∞:** `sdpiter/livetranslate-android/livetranslate-android-250e42ad8dc2c7041b57801f24e4c9ee6b0ef16c/app/src/main/java/com/sdpiter/livetranslate/SettingsActivity.kt`

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:** –≠—Ç–æ —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ. –ù–∞–º –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã `SettingsActivity` —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª TTS *—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≥–æ–ª–æ—Å–æ–≤*.

**–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç–µ** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –Ω–∞ –∫–æ–¥ –Ω–∏–∂–µ:

```kotlin
package com.sdpiter.livetranslate

import android.content.Context
import android.os.Bundle
import android.speech.tts.TextToSpeech
import android.speech.tts.Voice
import android.view.View
import android.widget.AdapterView
import android.widget.ArrayAdapter
import androidx.appcompat.app.AppCompatActivity
import androidx.appcompat.app.AppCompatDelegate
import com.sdpiter.livetranslate.databinding.ActivitySettingsBinding
import java.util.*

class SettingsActivity : AppCompatActivity() {
    
    private lateinit var binding: ActivitySettingsBinding
    
    // --- –ò–ó–ú–ï–ù–ï–ù–û: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è TTS –∏ —Å–ø–∏—Å–∫–∞ –≥–æ–ª–æ—Å–æ–≤ ---
    private var tts: TextToSpeech? = null
    private val voiceList = mutableListOf<Voice>()
    private val voiceDisplayList = mutableListOf<String>()
    private lateinit var voiceAdapter: ArrayAdapter<String>
    // --- –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô ---

    companion object {
        private const val PREFS_NAME = "LiveTranslatePrefs"
        private const val KEY_AUTO_SPEAK = "auto_speak"
        private const val KEY_AUTO_TRANSLATE = "auto_translate"
        private const val KEY_SPEECH_SPEED = "speech_speed"
        private const val KEY_DARK_THEME = "dark_theme"
        
        // --- –ò–ó–ú–ï–ù–ï–ù–û: –ù–æ–≤—ã–π –∫–ª—é—á –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏ –≥–æ–ª–æ—Å–∞ ---
        private const val KEY_SPEECH_VOICE = "speech_voice"
        // --- –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô ---
        
        fun isAutoSpeakEnabled(context: Context): Boolean {
            return context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .getBoolean(KEY_AUTO_SPEAK, false)
        }
        
        fun isAutoTranslateEnabled(context: Context): Boolean {
            return context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .getBoolean(KEY_AUTO_TRANSLATE, true)
        }
        
        fun getSpeechSpeed(context: Context): Float {
            return context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .getFloat(KEY_SPEECH_SPEED, 1.0f)
        }
        
        fun isDarkThemeEnabled(context: Context): Boolean {
            return context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .getBoolean(KEY_DARK_THEME, false)
        }

        // --- –ò–ó–ú–ï–ù–ï–ù–û: –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ –≥–æ–ª–æ—Å–∞ ---
        fun getSpeechVoice(context: Context): String? {
            return context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .getString(KEY_SPEECH_VOICE, null) // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é null
        }
        // --- –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô ---
    }
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivitySettingsBinding.inflate(layoutInflater)
        setContentView(binding.root)
        
        supportActionBar?.setDisplayHomeAsUpEnabled(true)
        supportActionBar?.title = "Settings"
        
        // --- –ò–ó–ú–ï–ù–ï–ù–û: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –≥–æ–ª–æ—Å–æ–≤ ---
        setupVoiceSpinner()
        // --- –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô ---

        loadSettings()
        setupListeners()

        // --- –ò–ó–ú–ï–ù–ï–ù–û: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º TTS, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≥–æ–ª–æ—Å–æ–≤ ---
        initializeTts()
        // --- –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô ---
    }
    
    private fun loadSettings() {
        val prefs = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
        
        binding.switchAutoSpeak.isChecked = prefs.getBoolean(KEY_AUTO_SPEAK, false)
        binding.switchAutoTranslate.isChecked = prefs.getBoolean(KEY_AUTO_TRANSLATE, true)
        binding.sliderSpeechSpeed.value = prefs.getFloat(KEY_SPEECH_SPEED, 1.0f)
        binding.switchDarkTheme.isChecked = prefs.getBoolean(KEY_DARK_THEME, false)
        
        updateSpeedLabel(binding.sliderSpeechSpeed.value)
        // –ó–∞–≥—Ä—É–∑–∫–∞ –≥–æ–ª–æ—Å–∞ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –≤ onInit TTS
    }

    // --- –ò–ó–ú–ï–ù–ï–ù–û: –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ TTS ---
    private fun initializeTts() {
        tts = TextToSpeech(this) { status ->
            if (status == TextToSpeech.SUCCESS) {
                loadVoices()
            }
        }
    }
    // --- –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô ---

    // --- –ò–ó–ú–ï–ù–ï–ù–û: –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≥–æ–ª–æ—Å–æ–≤ –≤ Spinner ---
    private fun loadVoices() {
        val prefs = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
        val savedVoiceName = prefs.getString(KEY_SPEECH_VOICE, null)
        
        // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –≥–æ–ª–æ—Å–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        val systemVoices = tts?.voices?.filter { 
            // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –º–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å "—Å–µ—Ç–µ–≤—ã–µ" –≥–æ–ª–æ—Å–∞
            !it.isNetworkConnectionRequired 
        }?.sortedBy { it.locale.displayLanguage }
        
        voiceList.clear()
        voiceDisplayList.clear()

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—Ü–∏—é "–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é"
        voiceDisplayList.add(getString(R.string.voice_default))
        voiceList.add(Voice("DEFAULT", Locale.getDefault(), Voice.QUALITY_NORMAL, Voice.LATENCY_NORMAL, false, emptySet())) // –§–∏–∫—Ç–∏–≤–Ω—ã–π Voice-–æ–±—ä–µ–∫—Ç

        var savedSelectionIndex = 0

        if (systemVoices != null) {
            for ((index, voice) in systemVoices.withIndex()) {
                // –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ –∏–º—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
                val displayName = "${voice.locale.displayName} (${getVoiceGender(voice)}) - [${voice.name}]"
                voiceDisplayList.add(displayName)
                voiceList.add(voice)
                
                // –ï—Å–ª–∏ —ç—Ç–æ—Ç –≥–æ–ª–æ—Å –±—ã–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω —Ä–∞–Ω–µ–µ, –∑–∞–ø–æ–º–∏–Ω–∞–µ–º –µ–≥–æ –ø–æ–∑–∏—Ü–∏—é
                if (voice.name == savedVoiceName) {
                    savedSelectionIndex = index + 1 // +1 –∏–∑-–∑–∞ "–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é"
                }
            }
        }
        
        runOnUiThread {
            voiceAdapter.notifyDataSetChanged()
            binding.spinnerSpeechVoice.setSelection(savedSelectionIndex)
        }
    }

    private fun getVoiceGender(voice: Voice): String {
        // –ü—ã—Ç–∞–µ–º—Å—è —É–≥–∞–¥–∞—Ç—å –ø–æ–ª –ø–æ –∏–º–µ–Ω–∏ –≥–æ–ª–æ—Å–∞ (–Ω–µ –≤—Å–µ–≥–¥–∞ –Ω–∞–¥–µ–∂–Ω–æ, –Ω–æ –ª—É—á—à–µ —á–µ–º –Ω–∏—á–µ–≥–æ)
        val name = voice.name.toLowerCase(Locale.ROOT)
        return when {
            name.contains("female") -> "Female"
            name.contains("male") -> "Male"
            else -> "Neutral"
        }
    }
    // --- –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô ---
    
    // --- –ò–ó–ú–ï–ù–ï–ù–û: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Spinner –¥–ª—è –≥–æ–ª–æ—Å–æ–≤ ---
    private fun setupVoiceSpinner() {
        voiceAdapter = ArrayAdapter(this, R.layout.spinner_item, voiceDisplayList)
        voiceAdapter.setDropDownViewResource(R.layout.spinner_dropdown_item)
        binding.spinnerSpeechVoice.adapter = voiceAdapter
    }
    // --- –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô ---

    private fun setupListeners() {
        val prefs = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
        
        binding.switchAutoSpeak.setOnCheckedChangeListener { _, isChecked ->
            prefs.edit().putBoolean(KEY_AUTO_SPEAK, isChecked).apply()
        }
        
        binding.switchAutoTranslate.setOnCheckedChangeListener { _, isChecked ->
            prefs.edit().putBoolean(KEY_AUTO_TRANSLATE, isChecked).apply()
        }
        
        binding.sliderSpeechSpeed.addOnChangeListener { _, value, fromUser ->
            if (fromUser) {
                prefs.edit().putFloat(KEY_SPEECH_SPEED, value).apply()
                updateSpeedLabel(value)
            }
        }
        
        binding.switchDarkTheme.setOnCheckedChangeListener { _, isChecked ->
            prefs.edit().putBoolean(KEY_DARK_THEME, isChecked).apply()
            applyTheme(isChecked)
        }

        // --- –ò–ó–ú–ï–ù–ï–ù–û: –°–ª—É—à–∞—Ç–µ–ª—å –¥–ª—è Spinner'–∞ –≥–æ–ª–æ—Å–æ–≤ ---
        binding.spinnerSpeechVoice.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {
            override fun onItemSelected(parent: AdapterView<*>?, view: View?, position: Int, id: Long) {
                // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π Voice-–æ–±—ä–µ–∫—Ç
                val selectedVoice = voiceList.getOrNull(position)
                
                if (selectedVoice != null) {
                    if (position == 0) { // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ "–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é"
                        prefs.edit().remove(KEY_SPEECH_VOICE).apply()
                    } else {
                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –≥–æ–ª–æ—Å–∞
                        prefs.edit().putString(KEY_SPEECH_VOICE, selectedVoice.name).apply()
                    }
                }
            }
            override fun onNothingSelected(parent: AdapterView<*>?) {}
        }
        // --- –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô ---
    }
    
    private fun updateSpeedLabel(value: Float) {
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º Locale.US –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –±—ã–ª–∞ —Ç–æ—á–∫–∞ (1.0f)
        binding.tvSpeedValue.text = String.format(Locale.US, "Speed: %.1fx", value)
    }
    
    private fun applyTheme(darkTheme: Boolean) {
        if (darkTheme) {
            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES)
        } else {
            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)
        }
    }
    
    override fun onSupportNavigateUp(): Boolean {
        finish()
        return true
    }

    // --- –ò–ó–ú–ï–ù–ï–ù–û: –ù–µ –∑–∞–±—ã–≤–∞–µ–º –≤—ã–∫–ª—é—á–∏—Ç—å TTS ---
    override fun onDestroy() {
        super.onDestroy()
        tts?.stop()
        tts?.shutdown()
    }
    // --- –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô ---
}
